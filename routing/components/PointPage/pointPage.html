<html ng-app="pointPageApp">

<head>
    <title>Points Of Interest App</title>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>

    <link rel="stylesheet" href="../../../node_modules/ng-dialog/css/ngDialog.min.css">
    <link rel="stylesheet" href="../../../node_modules/ng-dialog/css/ngDialog-theme-default.min.css">
    <script src="../../../node_modules/ng-dialog/js/ngDialog.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="../../../node_modules/angular-local-storage/dist/angular-local-storage.min.js"></script>

    <script src="../../../node_modules/lodash/lodash.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
    <style type="text/css">
        #point_map {
            height: 400px;
            width: 600px
        }

        .legend {
            background: white;
            line-height: 1.5em
        }

        .legend i {
            width: 5em;
            float: left
        }
    </style>


    <script src="pointPageController.js"></script>
    <!--<script src="../Services/favoritesPointsService.js"></script>-->
    <!--<script src="../Services/reviewPointsService.js"></script>-->
    <!--<script src="/routing/components/Services/pageForPoint.js"></script>-->

    <link rel="stylesheet" type="text/css" href="../FavoritesPointsOfInterest/favoritesStyle.css"/>
    <link rel="stylesheet" type="text/css" href="../../reviewModal.css"/>
    <link rel="stylesheet" type="text/css" href="../../styleIndex.css"/>
    <link rel="stylesheet" type="text/css" href="stylePointPage.css"/>

</head>

<body ng-controller="pointPageController as pointCtrl">
<div>
    <h1 class="title"><span ng-bind="pointCtrl.pointSelected.name"> </span></h1>
    <br><br>
    <div>
        <span class="label">Category: {{pointCtrl.pointSelected.category}}</span><br><br>
        <span class="label">Views: {{pointCtrl.pointSelected.views}} </span><br><br>
        <span class="label">Rating: {{pointCtrl.pointSelected.rating}}% </span><br><br>
        <br><br><br>
    </div>

    <div>
        <!--<button ng-click="pointCtrl.showPointOnMap()"> map</button>-->
        <div id="point_map"></div>
        <img class="center-r" src="{{pointCtrl.pointSelected.image}}"/>
        <p class="left-align">
        <p class="purple-title">Description:</p><br> {{pointCtrl.pointSelected.description}}</p>
    </div>
</div>

<div ng-show="pointCtrl.isLoggedIn" class="wi">
    <div class='heart fav-button' ng-class="{'active': pointCtrl.isFavoritePoint()}"
         ng-click="pointCtrl.toggleToFavorites($event)"></div>
    <div class='in-db-icon btn-option' ng-show="pointCtrl.isPointInDB()">
        <img ng-src="https://png-2.vector.me/files/images/6/8/683511/uk_union_flag_thumb"/>
    </div>
</div>

<div class="poi-review">
    <button class="review-btn" ng-click="pointCtrl.openReviewModal()" ng-show="pointCtrl.isLoggedIn">Rate It!</button>
    <script type="text/ng-template" id="ReviewModalTemplate">
        <div class="cont">
            <div class="stars">
                <form action="">
                    <label class="review">Rate</label>
                    <input class="star star-5" id="star-5-2" type="radio" name="star"
                           ng-model="poiReviewCtrl.reviewRate" ng-value="5"
                           ng-change="poiReviewCtrl.changeRateSelected()"/>
                    <label class="star star-5" for="star-5-2"></label>
                    <input class="star star-4" id="star-4-2" type="radio" name="star"
                           ng-model="poiReviewCtrl.reviewRate" ng-value="4"
                           ng-change="poiReviewCtrl.changeRateSelected()"/>
                    <label class="star star-4" for="star-4-2"></label>
                    <input class="star star-3" id="star-3-2" type="radio" name="star"
                           ng-model="poiReviewCtrl.reviewRate" ng-value="3"
                           ng-change="poiReviewCtrl.changeRateSelected()"/>
                    <label class="star star-3" for="star-3-2"></label>
                    <input class="star star-2" id="star-2-2" type="radio" name="star"
                           ng-model="poiReviewCtrl.reviewRate" ng-value="2"
                           ng-change="poiReviewCtrl.changeRateSelected()"/>
                    <label class="star star-2" for="star-2-2"></label>
                    <input class="star star-1" id="star-1-2" type="radio" name="star"
                           ng-model="poiReviewCtrl.reviewRate" ng-value="1"
                           ng-change="poiReviewCtrl.changeRateSelected()"/>
                    <label class="star star-1" for="star-1-2"></label>
                    <div class="rev-box">
                        <label class="review" for="review">Review</label>
                        <textarea class="review" col="30" name="review"
                                  ng-model="poiReviewCtrl.reviewMsg"></textarea>
                        <input type="button" value="send" ng-click="poiReviewCtrl.sendReviewMsg()"/>
                        <br>
                        <span ng-bind="poiReviewCtrl.sendReviewMsgComment"></span>
                    </div>
                </form>
            </div>
        </div>

    </script>

    <p>Last reviews: </p>
    <div ng-repeat="(id , review) in pointCtrl.lastReviews | orderBy: review.reviewDate track by $index">
        <span>{{$index+1}}. {{review.reviewMsg}} </span>
        <br>
        <span> {{review.reviewDate | date:'shortDate'}} </span>
        <br>
        <br>
    </div>
</div>

</body>
</html>